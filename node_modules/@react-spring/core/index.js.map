{"version":3,"file":"index.js","sources":["src/hooks/useChain.js","src/constants.ts","src/AnimationConfig.ts","src/Animation.ts","src/helpers.ts","src/scheduleProps.ts","src/AnimationResult.ts","src/runAsync.ts","src/FrameValue.ts","src/SpringPhase.ts","src/SpringValue.ts","src/Controller.ts","src/SpringContext.tsx","src/SpringHandle.ts","src/hooks/useSprings.ts","src/hooks/useSpring.ts","src/hooks/useTrail.ts","src/TransitionPhase.ts","src/hooks/useTransition.tsx","src/components/Spring.tsx","src/components/Trail.tsx","src/components/Transition.tsx","src/Interpolation.ts","src/interpolate.ts","src/globals.ts"],"sourcesContent":null,"names":["useChain","refs","timeSteps","timeFrame","useLayoutEffect","prevDelay","each","ref","i","current","controllers","length","delay","isNaN","ctrl","queue","props","start","p","Promise","resolve","updates","map","q","then","push","config","default","tension","friction","gentle","wobbly","stiff","slow","molasses","linear","t","defaults","configs","mass","damping","easing","clamp","AnimationConfig","constructor","frequency","velocity","restVelocity","precision","progress","duration","bounce","decay","round","Object","assign","mergeConfig","newConfig","defaultConfig","sanitizeConfig","key","is","und","Math","pow","PI","undefined","isTensionConfig","emptyArray","Animation","changed","values","toValues","fromValues","to","from","immediate","onStart","onChange","onRest","useMemo","create","deps","useMemoOne","callProp","value","args","fun","matchProp","toArray","includes","getProps","arg","arr","hasDefaultProp","getDefaultProp","getDefaultProps","omitKeys","keys","DEFAULT_PROPS","mergeDefaultProps","RESERVED_PROPS","loop","reset","pause","cancel","reverse","onDelayEnd","onProps","items","trail","sort","expires","initial","enter","update","leave","children","callId","parentId","getForwardProps","forward","count","prop","inferTo","out","val","computeGoal","getFluidConfig","get","isAnimatedString","G","range","output","scheduleProps","state","actions","reject","timeout","resumeQueue","add","onResume","resume","onPause","time","now","pauseQueue","frameLoop","setTimeout","delete","cancelId","err","getCombinedResult","target","results","some","result","cancelled","getCancelledResult","every","noop","getNoopResult","getFinishedResult","finished","runAsync","asyncTo","prevTo","promise","prevPromise","asyncId","defaultProps","preventBail","bail","bailPromise","withBailHandler","fn","onError","BailSignal","catch","bailIfEnded","bailSignal","bailResult","animate","arg1","arg2","obj","animating","stop","bind","all","cancelAsync","Error","isFrameValue","FrameValue","nextId","FluidValue","id","_priority","_children","Set","priority","_onPriorityChange","node","getAnimated","getValue","interpolate","deprecateInterpolate","addChild","child","size","_attach","removeChild","_detach","onParentChange","type","idle","_reset","_start","_emit","parent","_onChange","event","Array","CREATED","IDLE","ACTIVE","PAUSED","DISPOSED","SpringValue","animation","_phase","_state","_defaultProps","_lastCallId","_lastToId","goal","getFluidValue","AnimatedValue","lastVelocity","getPayload","advance","dt","anim","payload","toConfig","forEach","done","lastPosition","position","elapsed","elapsedTime","v0","min","e","exp","abs","bounceFactor","canBounce","isGrowing","isMoving","isBouncing","step","numSteps","ceil","n","springForce","dampingForce","acceleration","Number","console","warn","setValue","finish","phase","set","_focus","_set","_stop","checkDisposed","flush","_update","dispose","_prepareNode","_updateNode","nodeType","_getNodeType","setAnimated","parentNode","AnimatedArray","AnimatedString","isLoop","mergeDefaultProp","_merge","nextProps","createLoopUpdate","hasToProp","hasFromProp","coerceEventProp","prevFrom","hasFromChanged","isEqual","hasToChanged","fromConfig","hasAsyncTo","isAnimatable","num","name","goalType","started","hasValueChanged","onRestQueue","checkFinishedOnRest","onRestIndex","oldValue","spring","loopRet","overrides","createUpdate","findDefined","declareUpdate","BATCHED_EVENTS","Controller","springs","_flush","_initialProps","_lastAsyncId","_active","_events","Map","_onFrame","prepareKeys","flushUpdateQueue","iterator","isActive","onFrame","flushUpdate","handler","promises","getSprings","prepareSprings","createSpring","setSprings","observer","ctx","React","SpringContext","inherited","useContext","Provider","React.createElement","Consumer","useSpringContext","SpringHandle","getControllers","useSprings","propsFn","layoutId","useRef","forceUpdate","useForceUpdate","useState","ctrls","canFlushSync","refProp","prevLength","usePrev","disposed","slice","declareUpdates","startIndex","endIndex","api","context","cb","useOnce","x","arguments","useSpring","isFn","useTrail","propsArg","useCallbackOne","MOUNT","ENTER","UPDATE","LEAVE","useTransition","data","transitions","getKeys","usedTransitions","prevTransitions","expired","clearTimeout","expirationId","reused","indexOf","item","keyIndex","prevIndex","splice","a","b","changes","prevPhase","isLeave","find","expiry","expiryMs","useImperativeHandle","renderTransitions","render","elem","str","Spring","Trail","trails","index","Transition","Interpolation","source","calc","createInterpolator","_get","_dt","inputs","max","reduce","Globals","createStringInterpolator"],"mappings":"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"}